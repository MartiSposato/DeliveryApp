CREATE SCHEMA `DeliveryApp` DEFAULT CHARACTER SET utf8mb4;

USE DeliveryApp;

-- Table: RIDERS

CREATE TABLE RIDERS (
Nombre varchar(100) NOT NULL,

Fecha_de_inicio date NOT NULL,

Ciudad varchar(50) NOT NULL,

Rider_ID INT NOT NULL,

CONSTRAINT PK_RIDER PRIMARY KEY (Rider_ID)

);

-- Table: ORDENES

CREATE TABLE ORDENES (

Order_ID INT NOT NULL,

Ciudad varchar(50) NOT NULL,

Fecha date NOT NULL,

Rider_ID INT NOT NULL,

CONSTRAINT PK_ORDENES PRIMARY KEY (Order_ID)

);

-- Table: CASTIGOS

CREATE TABLE CASTIGOS (

Violation_ID INT NOT NULL,

State varchar(100) NOT NULL,

Fecha date NOT NULL,

Rider_ID INT NOT NULL,

CONSTRAINT PK_CASTIGOS PRIMARY KEY (Violation_ID)

);

-- Table: PAGOS

CREATE TABLE PAGOS (

Concepto varchar(100) NOT NULL,

Monto INT NOT NULL,

Rule_ID INT NOT NULL,

Rider_ID INT NOT NULL,

CONSTRAINT PK_PAGOS PRIMARY KEY (Rule_ID)

);

-- Table: SHIFTS

CREATE TABLE SHIFTS (

Shift_ID INT NOT NULL,

Fecha date NOT NULL,

Ciudad varchar (50) NULL,

Duracion INT NOT NULL,

Rider_ID INT NOT NULL,

CONSTRAINT PK_SHIFTS PRIMARY KEY (Shift_ID)

);

-- foreign keys 

-- Reference: FK_ORDENES_RIDERS (table: ORDENES)

ALTER TABLE ORDENES ADD CONSTRAINT FK_ORDENES_RIDERS FOREIGN KEY FK_ORDENES_RIDERS (RIDER_ID)

REFERENCES RIDERS (RIDER_ID);

-- Reference: FK_SHIFTS_RIDERS (table: SHIFTS)

ALTER TABLE SHIFTS ADD CONSTRAINT FK_SHIFTS_RIDERS FOREIGN KEY FK_SHIFTS_RIDERS (RIDER_ID)

REFERENCES RIDERS (RIDER_ID);

-- Reference: FK_CASTIGOS_RIDERS (table: CASTIGOS)

ALTER TABLE CASTIGOS ADD CONSTRAINT FK_CASTIGOS_RIDERS FOREIGN KEY FK_CASTIGOS_RIDERS (RIDER_ID)

REFERENCES RIDERS (RIDER_ID);

-- Reference: FK_CASTIGOS_RIDERS (table: CASTIGOS)

ALTER TABLE PAGOS ADD CONSTRAINT FK_PAGOS_RIDERS FOREIGN KEY FK_PAGOS_RIDERS (RIDER_ID)

REFERENCES RIDERS (RIDER_ID);

-- Table: CITIES

CREATE TABLE CITIES (
Ciudad varchar(50) NOT NULL,

City_ID INT NOT NULL AUTO_INCREMENT,

Order_ID INT NOT NULL,

CONSTRAINT PK_CITIES PRIMARY KEY (City_ID)

);

-- Table: LOCALES

CREATE TABLE LOCALES (

Order_ID INT NOT NULL,

Local_ID INT NOT NULL AUTO_INCREMENT,

CONSTRAINT PK_LOCALES PRIMARY KEY (local_ID)

);

-- Table: VIOLATIONS

CREATE TABLE VIOLATIONS (

Violation_ID INT NOT NULL,

Nombre Varchar(50) NOT NULL,

CONSTRAINT PK_VIOLATIONS PRIMARY KEY (Violation_ID)

);

-- Table: CONCEPTOS

CREATE TABLE CONCEPTOS (

Rule_ID INT NOT NULL,

Concepto Varchar(50) NOT NULL,

CONSTRAINT PK_CONCEPTOS PRIMARY KEY (Rule_ID)

);

-- Table: VERTICALES

CREATE TABLE VERTICALES (

vertical_ID INT NOT NULL auto_increment,

vertical_name varchar (50) NULL,

Local_ID INT NOT NULL,

CONSTRAINT PK_VERTICALES PRIMARY KEY (vertical_ID)

);

-- foreign keys 

-- Reference: FK_CITIES_ORDENES (table: CITIES)

ALTER TABLE CITIES ADD CONSTRAINT FK_CITIES_ORDENES FOREIGN KEY FK_CITIES_ORDENES (Order_ID)

REFERENCES ORDENES (Order_ID);

-- Reference: FK_LOCALES_ORDENES (table: LOCALES)

ALTER TABLE LOCALES ADD CONSTRAINT FK_LOCALES_ORDENES FOREIGN KEY FK_LOCALES_ORDENES (order_ID)

REFERENCES ORDENES (Order_ID);

-- Reference: FK_VIOLATIONS_CASTIGOS (table: VIOLATIONS)

ALTER TABLE VIOLATIONS ADD CONSTRAINT FK_VIOLATIONS_CASTIGOS FOREIGN KEY  FK_VIOLATIONS_CASTIGOS (Violation_ID)

REFERENCES CASTIGOS (Violation_ID);

-- Reference: FK_CONCEPTOS_PAGOS (table: CONCEPTOS)

ALTER TABLE CONCEPTOS ADD CONSTRAINT FK_CONCEPTOS_PAGOS FOREIGN KEY FK_CONCEPTOS_PAGOS (rule_ID)

REFERENCES PAGOS (Rule_ID);

-- Reference: FK_VERTICALES_LOCALES (table: VERTICALES)

ALTER TABLE VERTICALES ADD CONSTRAINT FK_VERTICALES_LOCALES FOREIGN KEY FK_VERTICALES_LOCALES (LOCAL_ID)

REFERENCES LOCALES (LOCAL_ID);
